{"version":3,"sources":["webpack://Positioning-jssdk/webpack/universalModuleDefinition","webpack://Positioning-jssdk/webpack/bootstrap","webpack://Positioning-jssdk/./src/gps/index.js","webpack://Positioning-jssdk/./node_modules/weixin-js-sdk/index.js","webpack://Positioning-jssdk/./src/bluetooth/index.js","webpack://Positioning-jssdk/./src/loc.js","webpack://Positioning-jssdk/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","target","_class","_temp","_target","gps","_this","_classCallCheck","this","_defineProperty","_possibleConstructorReturn","__proto__","getPrototypeOf","res","startSuccess","code","msg","data","coords","gpsObj","isOutdoor","longitude","latitude","accuracy","locType","timestamp","onSuccessGps","_inherits","_createClass","navigator","initGps","initSuccess","console","log","gpsWatchId","geolocation","watchPosition","geo_success","geo_error","enableHighAccuracy","clearWatch","stopLocationComplete","err","e","WeixinJSBridge","invoke","u","on","trigger","appId","C","verifyAppId","verifySignType","verifyTimestamp","verifyNonceStr","nonceStr","verifySignature","signature","timeStamp","package","paySign","signType","errCode","err_code","err_desc","err_detail","errMsg","err_msg","v","indexOf","substring","replace","toLowerCase","_complete","debug","isInnerInvoke","alert","JSON","stringify","success","cancel","fail","complete","length","h","Date","getTime","f","T","S","addEventListener","N","jWeixin","config","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","previewImage","getLocation","openProductSpecificView","addCard","openCard","chooseWXPay","openEnterpriseRedPacket","startSearchBeacons","stopSearchBeacons","onSearchBeacons","consumeAndShareCard","openAddress","document","I","title","y","userAgent","_","platform","k","match","w","M","P","x","A","initStartTime","initEndTime","preVerifyStartTime","preVerifyEndTime","V","version","initTime","preVerifyTime","networkType","isPreVerifyOk","systemType","clientVersion","url","encodeURIComponent","location","href","L","_completes","B","state","O","E","check","verifyJsApiList","jsApiList","_fail","push","Image","getNetworkType","src","ready","error","checkJsApi","checkResult","parse","desc","img_url","imgUrl","link","type","data_url","dataUrl","scene","updateTimelineShareData","updateAppMessageShareData","startRecord","stopRecord","onVoiceRecordEnd","playVoice","localId","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","isShowProgressTips","downloadVoice","serverId","translateVoice","chooseImage","count","sizeType","sourceType","localIds","current","urls","uploadImage","downloadImage","getLocalImgData","shift","wx","subtype","openLocation","address","scale","infoUrl","hideOptionMenu","showOptionMenu","closeWindow","hideMenuItems","menuList","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","scanQRCode","needResult","scanType","resultStr","scan_code","scan_result","postalCode","addressPostalCode","provinceName","proviceFirstStageName","cityName","addressCitySecondStageName","countryName","addressCountiesThirdStageName","detailInfo","addressDetailInfo","a","pid","productId","view_type","viewType","ext_info","extInfo","cardList","card_id","cardId","card_ext","cardExt","card_list","isSuccess","is_succ","chooseCard","app_id","location_id","shopId","sign_type","card_type","cardType","card_sign","cardSign","time_stamp","nonce_str","choose_card_info","consumedCardId","consumedCode","ticket","openEnterpriseChat","useridlist","userIds","chatname","groupName","launchMiniProgram","targetAppId","path","split","g","envVersion","miniProgram","navigateBack","arg","delta","navigateTo","redirectTo","switchTab","reLaunch","postMessage","getEnv","miniprogram","__wxjs_environment","b","R","tagName","preventDefault","stopPropagation","localData","_weixinJsSdk","_interopRequireDefault","signBody","phoneType","ibeaconArr","gpsTimeId","ua","test","bluetooth","onunload","default","fetch","signUrl","method","headers","Content-Type","body","then","response","json","configWx","initIbeacon","catch","initError","sign","_this2","appid","beta","_this3","_this4","time","now","flag","timeId","searchIbeacon","clearTimeout","setTimeout","onSearchBeaconsWithGps","_this5","startLocationError","_this6","getIbeaconPoints","_this7","currentLocation","_this8","filterData","beacons","filter","rssi","map","device","major","concat","minor","getIbeaconBody","mapId","getIbeconUrl","Polygon","setPolygonLocation","ibeaconObj","lon","lat","buildingId","building","level","fiducialLat","fiducialLon","onSuccessIbeacon","polygonLon","polygonLat","inputArr","_objectSpread","polygonLocation","polygonV2","points","_bluetooth","timeout","_ref","_ref$complete","_ref$error","initComplete","includes","checkGPS","getSignature","_ref2$complete","_ref2","_ref2$error","startLocationComplete","startGpsSearch","startIbeaconSearch","_ref3$complete","_ref3","stopGpsSearch","stopIbeaconSearch","_ref4$complete","_ref4","onLocationComplete","gpsCoords","ibeaconCoords"],"mappings":"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","file":"Positioning-jssdk.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Positioning-jssdk\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Positioning-jssdk\"] = factory();\n\telse\n\t\troot[\"Positioning-jssdk\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/**\r\n * Created by j_bleach on 2018/10/16 0016.\r\n */\r\nconst gpsFn = (target) => {\r\n    return class gps extends target {\r\n        static gpsWatchId = null;\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        checkGPS() {\r\n            if (\"geolocation\" in navigator) {\r\n                /* 地理位置服务可用 */\r\n                this.initGps = true;\r\n                this.initSuccess();\r\n            } else {\r\n                /* 地理位置服务不可用 */\r\n            }\r\n        }\r\n\r\n        geo_success = (res) => {\r\n            this.startSuccess({code: 1, msg: \"gps定位启动\"});\r\n            const data = res.coords;\r\n            const gpsObj = {\r\n                isOutdoor: 1,\r\n                longitude: data.longitude,\r\n                latitude: data.latitude,\r\n                accuracy: data.accuracy,\r\n                locType: \"gps\",\r\n                timestamp: res.timestamp\r\n            };\r\n            this.onSuccessGps(gpsObj);\r\n        };\r\n\r\n        static geo_error(err) {\r\n            throw err;\r\n        }\r\n\r\n        startGpsSearch() {\r\n            console.log(\"jinru gps\");\r\n            gps.gpsWatchId = navigator.geolocation.watchPosition(this.geo_success, gps.geo_error, {\r\n                enableHighAccuracy: true\r\n            });\r\n        }\r\n\r\n        stopGpsSearch() {\r\n            console.log(\"qingchu\");\r\n            navigator.geolocation.clearWatch(gps.gpsWatchId);\r\n            this.stopLocationComplete({code: 1, msg: \"gps定位停止\"});\r\n        }\r\n    };\r\n};\r\n\r\nexport default gpsFn;","! function (e, n) {\n  module.exports = n(e)\n}(window, function (e, n) {\n  function i(n, i, t) {\n    e.WeixinJSBridge ? WeixinJSBridge.invoke(n, o(i),\n    function(e) {\n      c(n, e, t)\n    }) : u(n, t)\n  }\n  function t(n, i, t) {\n    e.WeixinJSBridge ? WeixinJSBridge.on(n,\n    function(e) {\n      t && t.trigger && t.trigger(e),\n      c(n, e, i)\n    }) : t ? u(n, t) : u(n, i)\n  }\n  function o(e) {\n    return e = e || {},\n    e.appId = C.appId,\n    e.verifyAppId = C.appId,\n    e.verifySignType = \"sha1\",\n    e.verifyTimestamp = C.timestamp + \"\",\n    e.verifyNonceStr = C.nonceStr,\n    e.verifySignature = C.signature,\n    e\n  }\n  function r(e) {\n    return {\n      timeStamp: e.timestamp + \"\",\n      nonceStr: e.nonceStr,\n      package: e.package,\n      paySign: e.paySign,\n      signType: e.signType || \"SHA1\"\n    }\n  }\n  function a(e) {\n    return e.postalCode = e.addressPostalCode,\n    delete e.addressPostalCode,\n    e.provinceName = e.proviceFirstStageName,\n    delete e.proviceFirstStageName,\n    e.cityName = e.addressCitySecondStageName,\n    delete e.addressCitySecondStageName,\n    e.countryName = e.addressCountiesThirdStageName,\n    delete e.addressCountiesThirdStageName,\n    e.detailInfo = e.addressDetailInfo,\n    delete e.addressDetailInfo,\n    e\n  }\n  function c(e, n, i) {\n    \"openEnterpriseChat\" == e && (n.errCode = n.err_code),\n    delete n.err_code,\n    delete n.err_desc,\n    delete n.err_detail;\n    var t = n.errMsg;\n    t || (t = n.err_msg, delete n.err_msg, t = s(e, t), n.errMsg = t),\n    (i = i || {})._complete && (i._complete(n), delete i._complete),\n    t = n.errMsg || \"\",\n    C.debug && !i.isInnerInvoke && alert(JSON.stringify(n));\n    var o = t.indexOf(\":\");\n    switch (t.substring(o + 1)) {\n    case \"ok\":\n      i.success && i.success(n);\n      break;\n    case \"cancel\":\n      i.cancel && i.cancel(n);\n      break;\n    default:\n      i.fail && i.fail(n)\n    }\n    i.complete && i.complete(n)\n  }\n  function s(e, n) {\n    var i = e,\n    t = v[i];\n    t && (i = t);\n    var o = \"ok\";\n    if (n) {\n      var r = n.indexOf(\":\");\n      \"confirm\" == (o = n.substring(r + 1)) && (o = \"ok\"),\n      \"failed\" == o && (o = \"fail\"),\n      -1 != o.indexOf(\"failed_\") && (o = o.substring(7)),\n      -1 != o.indexOf(\"fail_\") && (o = o.substring(5)),\n      \"access denied\" != (o = (o = o.replace(/_/g, \" \")).toLowerCase()) && \"no permission to execute\" != o || (o = \"permission denied\"),\n      \"config\" == i && \"function not exist\" == o && (o = \"ok\"),\n      \"\" == o && (o = \"fail\")\n    }\n    return n = i + \":\" + o\n  }\n  function d(e) {\n    if (e) {\n      for (var n = 0,\n      i = e.length; n < i; ++n) {\n        var t = e[n],\n        o = h[t];\n        o && (e[n] = o)\n      }\n      return e\n    }\n  }\n  function u(e, n) {\n    if (! (!C.debug || n && n.isInnerInvoke)) {\n      var i = v[e];\n      i && (e = i),\n      n && n._complete && delete n._complete,\n      console.log('\"' + e + '\",', n || \"\")\n    }\n  }\n  function l(e) {\n    if (! (k || w || C.debug || x < \"6.0.2\" || V.systemType < 0)) {\n      var n = new Image;\n      V.appId = C.appId,\n      V.initTime = A.initEndTime - A.initStartTime,\n      V.preVerifyTime = A.preVerifyEndTime - A.preVerifyStartTime,\n      N.getNetworkType({\n        isInnerInvoke: !0,\n        success: function(e) {\n          V.networkType = e.networkType;\n          var i = \"https://open.weixin.qq.com/sdk/report?v=\" + V.version + \"&o=\" + V.isPreVerifyOk + \"&s=\" + V.systemType + \"&c=\" + V.clientVersion + \"&a=\" + V.appId + \"&n=\" + V.networkType + \"&i=\" + V.initTime + \"&p=\" + V.preVerifyTime + \"&u=\" + V.url;\n          n.src = i\n        }\n      })\n    }\n  }\n  function p() {\n    return (new Date).getTime()\n  }\n  function f(n) {\n    T && (e.WeixinJSBridge ? n() : S.addEventListener && S.addEventListener(\"WeixinJSBridgeReady\", n, !1))\n  }\n  function m() {\n    N.invoke || (N.invoke = function(n, i, t) {\n      e.WeixinJSBridge && WeixinJSBridge.invoke(n, o(i), t)\n    },\n    N.on = function(n, i) {\n      e.WeixinJSBridge && WeixinJSBridge.on(n, i)\n    })\n  }\n  function g(e) {\n    if (\"string\" == typeof e && e.length > 0) {\n      var n = e.split(\"?\")[0],\n      i = e.split(\"?\")[1];\n      return n += \".html\",\n      void 0 !== i ? n + \"?\" + i: n\n    }\n  }\n  if (!e.jWeixin) {\n    var h = {\n      config: \"preVerifyJSAPI\",\n      onMenuShareTimeline: \"menu:share:timeline\",\n      onMenuShareAppMessage: \"menu:share:appmessage\",\n      onMenuShareQQ: \"menu:share:qq\",\n      onMenuShareWeibo: \"menu:share:weiboApp\",\n      onMenuShareQZone: \"menu:share:QZone\",\n      previewImage: \"imagePreview\",\n      getLocation: \"geoLocation\",\n      openProductSpecificView: \"openProductViewWithPid\",\n      addCard: \"batchAddCard\",\n      openCard: \"batchViewCard\",\n      chooseWXPay: \"getBrandWCPayRequest\",\n      openEnterpriseRedPacket: \"getRecevieBizHongBaoRequest\",\n      startSearchBeacons: \"startMonitoringBeacons\",\n      stopSearchBeacons: \"stopMonitoringBeacons\",\n      onSearchBeacons: \"onBeaconsInRange\",\n      consumeAndShareCard: \"consumedShareCard\",\n      openAddress: \"editAddress\"\n    },\n    v = function() {\n      var e = {};\n      for (var n in h) e[h[n]] = n;\n      return e\n    } (),\n    S = e.document,\n    I = S.title,\n    y = navigator.userAgent.toLowerCase(),\n    _ = navigator.platform.toLowerCase(),\n    k = !(!_.match(\"mac\") && !_.match(\"win\")),\n    w = -1 != y.indexOf(\"wxdebugger\"),\n    T = -1 != y.indexOf(\"micromessenger\"),\n    M = -1 != y.indexOf(\"android\"),\n    P = -1 != y.indexOf(\"iphone\") || -1 != y.indexOf(\"ipad\"),\n    x = function() {\n      var e = y.match(/micromessenger\\/(\\d+\\.\\d+\\.\\d+)/) || y.match(/micromessenger\\/(\\d+\\.\\d+)/);\n      return e ? e[1] : \"\"\n    } (),\n    A = {\n      initStartTime: p(),\n      initEndTime: 0,\n      preVerifyStartTime: 0,\n      preVerifyEndTime: 0\n    },\n    V = {\n      version: 1,\n      appId: \"\",\n      initTime: 0,\n      preVerifyTime: 0,\n      networkType: \"\",\n      isPreVerifyOk: 1,\n      systemType: P ? 1 : M ? 2 : -1,\n      clientVersion: x,\n      url: encodeURIComponent(location.href)\n    },\n    C = {},\n    L = {\n      _completes: []\n    },\n    B = {\n      state: 0,\n      data: {}\n    };\n    f(function() {\n      A.initEndTime = p()\n    });\n    var O = !1,\n    E = [],\n    N = {\n      config: function(e) {\n        C = e,\n        u(\"config\", e);\n        var n = !1 !== C.check;\n        f(function() {\n          if (n) i(h.config, {\n            verifyJsApiList: d(C.jsApiList)\n          },\n          function() {\n            L._complete = function(e) {\n              A.preVerifyEndTime = p(),\n              B.state = 1,\n              B.data = e\n            },\n            L.success = function(e) {\n              V.isPreVerifyOk = 0\n            },\n            L.fail = function(e) {\n              L._fail ? L._fail(e) : B.state = -1\n            };\n            var e = L._completes;\n            return e.push(function() {\n              l()\n            }),\n            L.complete = function(n) {\n              for (var i = 0,\n              t = e.length; i < t; ++i) e[i]();\n              L._completes = []\n            },\n            L\n          } ()),\n          A.preVerifyStartTime = p();\n          else {\n            B.state = 1;\n            for (var e = L._completes,\n            t = 0,\n            o = e.length; t < o; ++t) e[t]();\n            L._completes = []\n          }\n        }),\n        m()\n      },\n      ready: function(e) {\n        0 != B.state ? e() : (L._completes.push(e), !T && C.debug && e())\n      },\n      error: function(e) {\n        x < \"6.0.2\" || ( - 1 == B.state ? e(B.data) : L._fail = e)\n      },\n      checkJsApi: function(e) {\n        var n = function(e) {\n          var n = e.checkResult;\n          for (var i in n) {\n            var t = v[i];\n            t && (n[t] = n[i], delete n[i])\n          }\n          return e\n        };\n        i(\"checkJsApi\", {\n          jsApiList: d(e.jsApiList)\n        },\n        (e._complete = function(e) {\n          if (M) {\n            var i = e.checkResult;\n            i && (e.checkResult = JSON.parse(i))\n          }\n          e = n(e)\n        },\n        e))\n      },\n      onMenuShareTimeline: function(e) {\n        t(h.onMenuShareTimeline, {\n          complete: function() {\n            i(\"shareTimeline\", {\n              title: e.title || I,\n              desc: e.title || I,\n              img_url: e.imgUrl || \"\",\n              link: e.link || location.href,\n              type: e.type || \"link\",\n              data_url: e.dataUrl || \"\"\n            },\n            e)\n          }\n        },\n        e)\n      },\n      onMenuShareAppMessage: function(e) {\n        t(h.onMenuShareAppMessage, {\n          complete: function(n) {\n            \"favorite\" === n.scene ? i(\"sendAppMessage\", {\n              title: e.title || I,\n              desc: e.desc || \"\",\n              link: e.link || location.href,\n              img_url: e.imgUrl || \"\",\n              type: e.type || \"link\",\n              data_url: e.dataUrl || \"\"\n            }) : i(\"sendAppMessage\", {\n              title: e.title || I,\n              desc: e.desc || \"\",\n              link: e.link || location.href,\n              img_url: e.imgUrl || \"\",\n              type: e.type || \"link\",\n              data_url: e.dataUrl || \"\"\n            },\n            e)\n          }\n        },\n        e)\n      },\n      onMenuShareQQ: function(e) {\n        t(h.onMenuShareQQ, {\n          complete: function() {\n            i(\"shareQQ\", {\n              title: e.title || I,\n              desc: e.desc || \"\",\n              img_url: e.imgUrl || \"\",\n              link: e.link || location.href\n            },\n            e)\n          }\n        },\n        e)\n      },\n      onMenuShareWeibo: function(e) {\n        t(h.onMenuShareWeibo, {\n          complete: function() {\n            i(\"shareWeiboApp\", {\n              title: e.title || I,\n              desc: e.desc || \"\",\n              img_url: e.imgUrl || \"\",\n              link: e.link || location.href\n            },\n            e)\n          }\n        },\n        e)\n      },\n      onMenuShareQZone: function(e) {\n        t(h.onMenuShareQZone, {\n          complete: function() {\n            i(\"shareQZone\", {\n              title: e.title || I,\n              desc: e.desc || \"\",\n              img_url: e.imgUrl || \"\",\n              link: e.link || location.href\n            },\n            e)\n          }\n        },\n        e)\n      },\n      updateTimelineShareData: function(e) {\n        i(\"updateTimelineShareData\", {\n          title: e.title,\n          link: e.link,\n          imgUrl: e.imgUrl\n        },\n        e)\n      },\n      updateAppMessageShareData: function(e) {\n        i(\"updateAppMessageShareData\", {\n          title: e.title,\n          desc: e.desc,\n          link: e.link,\n          imgUrl: e.imgUrl\n        },\n        e)\n      },\n      startRecord: function(e) {\n        i(\"startRecord\", {},\n        e)\n      },\n      stopRecord: function(e) {\n        i(\"stopRecord\", {},\n        e)\n      },\n      onVoiceRecordEnd: function(e) {\n        t(\"onVoiceRecordEnd\", e)\n      },\n      playVoice: function(e) {\n        i(\"playVoice\", {\n          localId: e.localId\n        },\n        e)\n      },\n      pauseVoice: function(e) {\n        i(\"pauseVoice\", {\n          localId: e.localId\n        },\n        e)\n      },\n      stopVoice: function(e) {\n        i(\"stopVoice\", {\n          localId: e.localId\n        },\n        e)\n      },\n      onVoicePlayEnd: function(e) {\n        t(\"onVoicePlayEnd\", e)\n      },\n      uploadVoice: function(e) {\n        i(\"uploadVoice\", {\n          localId: e.localId,\n          isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n        },\n        e)\n      },\n      downloadVoice: function(e) {\n        i(\"downloadVoice\", {\n          serverId: e.serverId,\n          isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n        },\n        e)\n      },\n      translateVoice: function(e) {\n        i(\"translateVoice\", {\n          localId: e.localId,\n          isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n        },\n        e)\n      },\n      chooseImage: function(e) {\n        i(\"chooseImage\", {\n          scene: \"1|2\",\n          count: e.count || 9,\n          sizeType: e.sizeType || [\"original\", \"compressed\"],\n          sourceType: e.sourceType || [\"album\", \"camera\"]\n        },\n        (e._complete = function(e) {\n          if (M) {\n            var n = e.localIds;\n            try {\n              n && (e.localIds = JSON.parse(n))\n            } catch(e) {}\n          }\n        },\n        e))\n      },\n      getLocation: function(e) {},\n      previewImage: function(e) {\n        i(h.previewImage, {\n          current: e.current,\n          urls: e.urls\n        },\n        e)\n      },\n      uploadImage: function(e) {\n        i(\"uploadImage\", {\n          localId: e.localId,\n          isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n        },\n        e)\n      },\n      downloadImage: function(e) {\n        i(\"downloadImage\", {\n          serverId: e.serverId,\n          isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n        },\n        e)\n      },\n      getLocalImgData: function(e) { ! 1 === O ? (O = !0, i(\"getLocalImgData\", {\n          localId: e.localId\n        },\n        (e._complete = function(e) {\n          if (O = !1, E.length > 0) {\n            var n = E.shift();\n            wx.getLocalImgData(n)\n          }\n        },\n        e))) : E.push(e)\n      },\n      getNetworkType: function(e) {\n        var n = function(e) {\n          var n = e.errMsg;\n          e.errMsg = \"getNetworkType:ok\";\n          var i = e.subtype;\n          if (delete e.subtype, i) e.networkType = i;\n          else {\n            var t = n.indexOf(\":\"),\n            o = n.substring(t + 1);\n            switch (o) {\n            case \"wifi\":\n            case \"edge\":\n            case \"wwan\":\n              e.networkType = o;\n              break;\n            default:\n              e.errMsg = \"getNetworkType:fail\"\n            }\n          }\n          return e\n        };\n        i(\"getNetworkType\", {},\n        (e._complete = function(e) {\n          e = n(e)\n        },\n        e))\n      },\n      openLocation: function(e) {\n        i(\"openLocation\", {\n          latitude: e.latitude,\n          longitude: e.longitude,\n          name: e.name || \"\",\n          address: e.address || \"\",\n          scale: e.scale || 28,\n          infoUrl: e.infoUrl || \"\"\n        },\n        e)\n      },\n      getLocation: function(e) {\n        e = e || {},\n        i(h.getLocation, {\n          type: e.type || \"wgs84\"\n        },\n        (e._complete = function(e) {\n          delete e.type\n        },\n        e))\n      },\n      hideOptionMenu: function(e) {\n        i(\"hideOptionMenu\", {},\n        e)\n      },\n      showOptionMenu: function(e) {\n        i(\"showOptionMenu\", {},\n        e)\n      },\n      closeWindow: function(e) {\n        i(\"closeWindow\", {},\n        e = e || {})\n      },\n      hideMenuItems: function(e) {\n        i(\"hideMenuItems\", {\n          menuList: e.menuList\n        },\n        e)\n      },\n      showMenuItems: function(e) {\n        i(\"showMenuItems\", {\n          menuList: e.menuList\n        },\n        e)\n      },\n      hideAllNonBaseMenuItem: function(e) {\n        i(\"hideAllNonBaseMenuItem\", {},\n        e)\n      },\n      showAllNonBaseMenuItem: function(e) {\n        i(\"showAllNonBaseMenuItem\", {},\n        e)\n      },\n      scanQRCode: function(e) {\n        i(\"scanQRCode\", {\n          needResult: (e = e || {}).needResult || 0,\n          scanType: e.scanType || [\"qrCode\", \"barCode\"]\n        },\n        (e._complete = function(e) {\n          if (P) {\n            var n = e.resultStr;\n            if (n) {\n              var i = JSON.parse(n);\n              e.resultStr = i && i.scan_code && i.scan_code.scan_result\n            }\n          }\n        },\n        e))\n      },\n      openAddress: function(e) {\n        i(h.openAddress, {},\n        (e._complete = function(e) {\n          e = a(e)\n        },\n        e))\n      },\n      openProductSpecificView: function(e) {\n        i(h.openProductSpecificView, {\n          pid: e.productId,\n          view_type: e.viewType || 0,\n          ext_info: e.extInfo\n        },\n        e)\n      },\n      addCard: function(e) {\n        for (var n = e.cardList,\n        t = [], o = 0, r = n.length; o < r; ++o) {\n          var a = n[o],\n          c = {\n            card_id: a.cardId,\n            card_ext: a.cardExt\n          };\n          t.push(c)\n        }\n        i(h.addCard, {\n          card_list: t\n        },\n        (e._complete = function(e) {\n          var n = e.card_list;\n          if (n) {\n            for (var i = 0,\n            t = (n = JSON.parse(n)).length; i < t; ++i) {\n              var o = n[i];\n              o.cardId = o.card_id,\n              o.cardExt = o.card_ext,\n              o.isSuccess = !!o.is_succ,\n              delete o.card_id,\n              delete o.card_ext,\n              delete o.is_succ\n            }\n            e.cardList = n,\n            delete e.card_list\n          }\n        },\n        e))\n      },\n      chooseCard: function(e) {\n        i(\"chooseCard\", {\n          app_id: C.appId,\n          location_id: e.shopId || \"\",\n          sign_type: e.signType || \"SHA1\",\n          card_id: e.cardId || \"\",\n          card_type: e.cardType || \"\",\n          card_sign: e.cardSign,\n          time_stamp: e.timestamp + \"\",\n          nonce_str: e.nonceStr\n        },\n        (e._complete = function(e) {\n          e.cardList = e.choose_card_info,\n          delete e.choose_card_info\n        },\n        e))\n      },\n      openCard: function(e) {\n        for (var n = e.cardList,\n        t = [], o = 0, r = n.length; o < r; ++o) {\n          var a = n[o],\n          c = {\n            card_id: a.cardId,\n            code: a.code\n          };\n          t.push(c)\n        }\n        i(h.openCard, {\n          card_list: t\n        },\n        e)\n      },\n      consumeAndShareCard: function(e) {\n        i(h.consumeAndShareCard, {\n          consumedCardId: e.cardId,\n          consumedCode: e.code\n        },\n        e)\n      },\n      chooseWXPay: function(e) {\n        i(h.chooseWXPay, r(e), e)\n      },\n      openEnterpriseRedPacket: function(e) {\n        i(h.openEnterpriseRedPacket, r(e), e)\n      },\n      startSearchBeacons: function(e) {\n        i(h.startSearchBeacons, {\n          ticket: e.ticket\n        },\n        e)\n      },\n      stopSearchBeacons: function(e) {\n        i(h.stopSearchBeacons, {},\n        e)\n      },\n      onSearchBeacons: function(e) {\n        t(h.onSearchBeacons, e)\n      },\n      openEnterpriseChat: function(e) {\n        i(\"openEnterpriseChat\", {\n          useridlist: e.userIds,\n          chatname: e.groupName\n        },\n        e)\n      },\n      launchMiniProgram: function(e) {\n        i(\"launchMiniProgram\", {\n          targetAppId: e.targetAppId,\n          path: g(e.path),\n          envVersion: e.envVersion\n        },\n        e)\n      },\n      miniProgram: {\n        navigateBack: function(e) {\n          e = e || {},\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"navigateBack\",\n              arg: {\n                delta: e.delta || 1\n              }\n            },\n            e)\n          })\n        },\n        navigateTo: function(e) {\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"navigateTo\",\n              arg: {\n                url: e.url\n              }\n            },\n            e)\n          })\n        },\n        redirectTo: function(e) {\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"redirectTo\",\n              arg: {\n                url: e.url\n              }\n            },\n            e)\n          })\n        },\n        switchTab: function(e) {\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"switchTab\",\n              arg: {\n                url: e.url\n              }\n            },\n            e)\n          })\n        },\n        reLaunch: function(e) {\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"reLaunch\",\n              arg: {\n                url: e.url\n              }\n            },\n            e)\n          })\n        },\n        postMessage: function(e) {\n          f(function() {\n            i(\"invokeMiniProgramAPI\", {\n              name: \"postMessage\",\n              arg: e.data || {}\n            },\n            e)\n          })\n        },\n        getEnv: function(n) {\n          f(function() {\n            n({\n              miniprogram: \"miniprogram\" === e.__wxjs_environment\n            })\n          })\n        }\n      }\n    },\n    b = 1,\n    R = {};\n    return S.addEventListener(\"error\",\n    function(e) {\n      if (!M) {\n        var n = e.target,\n        i = n.tagName,\n        t = n.src;\n        if ((\"IMG\" == i || \"VIDEO\" == i || \"AUDIO\" == i || \"SOURCE\" == i) && -1 != t.indexOf(\"wxlocalresource://\")) {\n          e.preventDefault(),\n          e.stopPropagation();\n          var o = n[\"wx-id\"];\n          if (o || (o = b++, n[\"wx-id\"] = o), R[o]) return;\n          R[o] = !0,\n          wx.ready(function() {\n            wx.getLocalImgData({\n              localId: t,\n              success: function(e) {\n                n.src = e.localData\n              }\n            })\n          })\n        }\n      }\n    },\n    !0),\n    S.addEventListener(\"load\",\n    function(e) {\n      if (!M) {\n        var n = e.target,\n        i = n.tagName;\n        n.src;\n        if (\"IMG\" == i || \"VIDEO\" == i || \"AUDIO\" == i || \"SOURCE\" == i) {\n          var t = n[\"wx-id\"];\n          t && (R[t] = !1)\n        }\n      }\n    },\n    !0),\n    n && (e.wx = e.jWeixin = N),\n    N\n  }\n});","/**\r\n * Created by j_bleach on 2018/10/16 0016.\r\n */\r\n\r\nimport wx from \"weixin-js-sdk\";\r\n\r\nconst INTERVAL = 500; // 服务器时间间隔\r\nconst POINTLENTH = 3; // 质心点计算数组长度\r\nconst CHANGE_GPS = 5000; // 搜索不到蓝牙5000ms后，切换gps\r\n\r\nconst blueToothFn = (target) => {\r\n    const signUrl = `https://map.parkbobo.com/location/weixin/v1/jsSdkSign`;\r\n    const getIbeconUrl = `https://map.parkbobo.com/location/weka/v1/classify`;\r\n    const signBody = `url=${encodeURIComponent(window.location.href.split(\"#\")[0])}`;\r\n    let phoneType = \"ios\";\r\n    let ibeaconArr = []; // 蓝牙地位点集合\r\n    let gpsTimeId = null; // gps定时器标记\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    if (/iphone|ipad|ipod/.test(ua)) {\r\n        phoneType = `ios`;\r\n    } else if (/android/.test(ua)) {\r\n        phoneType = `android`;\r\n    }\r\n    return class bluetooth extends target {\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        getSignature() {\r\n            console.log(\"请求签名\");\r\n            // 注销页面，停止微信\r\n            window.onunload = () => {\r\n                wx.stopSearchBeacons();\r\n            };\r\n            // 请求签名\r\n            fetch(signUrl, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                },\r\n                body: signBody\r\n            }).then((response) => response.json()).then((data) => {\r\n                this.configWx(data.data);\r\n                this.initIbeacon = true;\r\n                this.initSuccess();\r\n            }).catch((err) => {\r\n                this.initError(err);\r\n            });\r\n        }\r\n\r\n        // 配置微信\r\n        configWx(sign) {\r\n            wx.config({\r\n                debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n                appId: sign.appid, // 必填，公众号的唯一标识\r\n                timestamp: sign.timestamp, // 必填，生成签名的时间戳\r\n                nonceStr: sign.nonceStr, // 必填，生成签名的随机串\r\n                signature: sign.signature,// 必填，签名\r\n                beta: true,   //用于在页面加载之初调用JSAPI\r\n                jsApiList: [\"openWXDeviceLib\", \"closeWXDeviceLib\",\r\n                    \"onWXDeviceBluetoothStateChange\", \"startSearchBeacons\",\r\n                    \"stopSearchBeacons\", \"onSearchBeacons\", \"startRecord\", \"stopRecord\",\r\n                    \"translateVoice\", \"onMenuShareAppMessage\", \"getLocation\"] // 必填，需要使用的JS接口列表\r\n            });\r\n            wx.error((res) => {\r\n                this.initError(res);\r\n            });\r\n        }\r\n\r\n        stopIbeaconSearch() {\r\n            wx.stopSearchBeacons({\r\n                complete: () => {\r\n                    console.log(\"停止蓝牙\");\r\n                    this.stopLocationComplete({code: 0, msg: \"蓝牙停止\"});\r\n                },\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-16\r\n         * @Description: 开始搜索\r\n         * @param name:String\r\n         * @return name:String\r\n         */\r\n        startIbeaconSearch() {\r\n            console.log(\"进入蓝牙\");\r\n            wx.ready(() => {\r\n                let time = Date.now();\r\n                let flag = false;\r\n                let timeId = void 0;\r\n                window.addEventListener(\"devicemotion\", () => {\r\n                    if (Date.now() - time >= 80) {\r\n                        time = Date.now();\r\n                        if (false === flag) {\r\n                            wx.stopSearchBeacons({\r\n                                complete: () => {\r\n                                    console.log(\"启动蓝牙搜索\");\r\n                                    ibeaconArr = [];\r\n                                    this.searchIbeacon();\r\n                                },\r\n                                fail: (err) => {\r\n                                    console.log(\"stop fail\", err);\r\n                                }\r\n                            });\r\n                        }\r\n                        flag = true;\r\n                        timeId && clearTimeout(timeId);\r\n                        timeId = setTimeout(() => {\r\n                            flag = false;\r\n                            wx.stopSearchBeacons();\r\n                        }, 500);\r\n                    }\r\n                });\r\n                if (!this.initGps) {\r\n                    this.onSearchBeacons();\r\n                } else {\r\n                    this.onSearchBeaconsWithGps();\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-16\r\n         * @Description: 搜索蓝牙点\r\n         */\r\n        searchIbeacon() {\r\n            wx.startSearchBeacons({\r\n                ticket: \"\",\r\n                complete: (t) => {\r\n                    console.log(\"开启成功\", t);\r\n                    this.startSuccess({code: 0, msg: `室内定位启动，${t.errMsg}`});\r\n                    let n = t.errMsg;\r\n                    if (\"startSearchBeacons:already started\" === n) {\r\n                        return wx.stopSearchBeacons(() => {\r\n                            this.searchIbeacon();\r\n                        });\r\n                    }\r\n                    if (\"startSearchBeacons:system unsupported\" === n) {\r\n                        this.searchIbeacon();\r\n                    }\r\n                    \"startSearchBeacons:bluetooth power off\" === n\r\n                        ? this.startLocationError(\"蓝牙未打开，请打开蓝牙后，重新打开页面\")\r\n                        : \"startSearchBeacons:location service disable\" === n && this.startLocationError(\"地理位置服务未打开\");\r\n                },\r\n                fail: (t) => {\r\n                    console.log(\"开启失败\", t);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-17\r\n         * @Description: 监听蓝牙点\r\n         */\r\n        onSearchBeacons() {\r\n            wx.onSearchBeacons({ //监听iBeacon设备更新事件\r\n                complete: (data) => {\r\n                    this.getIbeaconPoints(data);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-18\r\n         * @Description: 监听蓝牙点（超时切换gps）\r\n         * @param name:String\r\n         * @return name:String\r\n         */\r\n        onSearchBeaconsWithGps() {\r\n            console.log(\"进入蓝牙定时搜索\");\r\n            wx.onSearchBeacons({ //监听iBeacon设备更新事件\r\n                complete: (data) => {\r\n                    this.getIbeaconPoints(data);\r\n                    this.currentLocation = \"ibeacon\";\r\n                    gpsTimeId && clearTimeout(gpsTimeId);\r\n                    gpsTimeId = setTimeout(() => {\r\n                        console.log(\"定时器执行\", this);\r\n                        this.currentLocation = \"gps\";\r\n                    }, CHANGE_GPS);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-17\r\n         * @Description: 获取蓝牙点\r\n         */\r\n        getIbeaconPoints(data) {\r\n            let filterData = data.beacons && data.beacons\r\n                .filter(v => v.rssi != 0)\r\n                .map(v => {\r\n                    return {rssi: v.rssi, device: `${v.major}_${v.minor}`};\r\n                });\r\n            if (filterData.length === 0) {\r\n                // this.onSuccess();\r\n            } else {\r\n                filterData = JSON.stringify([filterData]);\r\n                const getIbeaconBody = `mapId=${this.mapId}&datajson=${filterData}\r\n            &interval=${INTERVAL}&type=wx_${phoneType}`;\r\n                fetch(getIbeconUrl, {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                    },\r\n                    body: getIbeaconBody\r\n                }).then((response) => response.json()).then((data) => {\r\n                    if (data.code == 0) {\r\n                        const res = data.data;\r\n                        const Polygon = this.setPolygonLocation(res);\r\n                        const ibeaconObj = {\r\n                            isOutdoor: 0,\r\n                            longitude: res.lon,\r\n                            latitude: res.lat,\r\n                            buildingId: res.building,\r\n                            level: res.level,\r\n                            fiducialLat: res.fiducialLat,\r\n                            fiducialLon: res.fiducialLon,\r\n                            locType: \"ibeacon\",\r\n                            ...Polygon\r\n                        };\r\n                        this.onSuccessIbeacon(ibeaconObj);\r\n                    }\r\n                }).catch((err) => {\r\n                    // this.initError(err);\r\n                    console.log(err);\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-10-17\r\n         * @Description: 计算质心点\r\n         * @param data:array\r\n         * @return Polygon:obj\r\n         */\r\n        setPolygonLocation(data) {\r\n            if (ibeaconArr.length < POINTLENTH) {\r\n                ibeaconArr.push(data);\r\n                return {\r\n                    polygonLon: 0,\r\n                    polygonLat: 0\r\n                };\r\n            } else {\r\n                ibeaconArr.push(data);\r\n                const inputArr = ibeaconArr && ibeaconArr.map((v, i) => {\r\n                    return {...v, timestamp: new Date().getTime() + i * 2000};\r\n                });\r\n                const polygonLocation = this.polygonV2(inputArr);\r\n                ibeaconArr.shift();\r\n                return polygonLocation;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @author j_bleach\r\n         * @date 2018-08-23\r\n         * @Description: 更新质心点算法 polygonV2\r\n         * @param points:Array\r\n         */\r\n        polygonV2(points) {\r\n            let m = 0, x = 0, y = 0;\r\n            for (let i = 0; i < points.length; i++) {\r\n                m += points[i].timestamp;\r\n                x += (points[i].lon * points[i].timestamp);\r\n                y += (points[i].lat * points[i].timestamp);\r\n            }\r\n            return {polygonLon: x / m, polygonLat: y / m};\r\n        }\r\n    };\r\n};\r\n\r\nexport default blueToothFn;","/**\r\n * Created by j_bleach on 2018/10/16 0016.\r\n */\r\n/*eslint-disable*/\r\nimport bluetooth from \"./bluetooth\";\r\nimport gps from \"./gps\";\r\n\r\n@gps\r\n@bluetooth\r\nclass Loc {\r\n    /**\r\n     * @author j_bleach\r\n     * @date 2018-10-15\r\n     * @Description: 定位初始化\r\n     * @param timeout:number 超时时间，默认无穷大\r\n     * @param locType:string[] 定位类型\r\n     * @param complete:fn 成功回调\r\n     * @param error:fn 失败回调\r\n     * @return void\r\n     */\r\n    initIbeacon = false;\r\n    initGps = false;\r\n    ibeaconCoords = null;\r\n    gpsCoords = null;\r\n    locType = [];\r\n\r\n\r\n    init({\r\n             timeout,\r\n             locType,\r\n             mapId,\r\n             complete = () => {\r\n             },\r\n             error = () => {\r\n             }\r\n         }) {\r\n        this.mapId = mapId;\r\n        this.timeout = timeout; // 超时时间\r\n        this.locType = locType; // 定位类型\r\n        this.initComplete = complete; // 初始化成功函数\r\n        this.initError = error; // 初始化失败函数\r\n        locType && locType.includes(\"gps\") && this.checkGPS();\r\n        locType && locType.includes(\"ibeacon\") && this.getSignature();\r\n    }\r\n\r\n    initSuccess() {\r\n        if (!(this.locType.includes(\"ibeacon\") && !this.initIbeacon || this.locType.includes(\"gps\") && !this.initGps)) {\r\n            this.initComplete();\r\n        }\r\n    }\r\n\r\n    // 开启定位\r\n    startLocation({\r\n                      complete = () => {\r\n                      },\r\n                      error = () => {\r\n                      }\r\n                  }) {\r\n        this.startLocationComplete = complete;\r\n        this.startLocationError = error;\r\n        this.locType && this.locType.includes(\"gps\") && this.startGpsSearch();\r\n        this.locType && this.locType.includes(\"ibeacon\") && this.startIbeaconSearch();\r\n    }\r\n\r\n    // 开启成功\r\n    startSuccess(response) {\r\n        this.startLocationComplete(response);\r\n    }\r\n\r\n    // 停止定位\r\n    stopLocation(\r\n        {\r\n            complete = () => {\r\n            },\r\n            error = () => {\r\n            }\r\n        }\r\n    ) {\r\n        this.stopLocationComplete = complete;\r\n        this.locType && this.locType.includes(\"gps\") && this.stopGpsSearch();\r\n        this.locType && this.locType.includes(\"ibeacon\") && this.stopIbeaconSearch();\r\n    }\r\n\r\n    // 监听定位\r\n    onLocation(\r\n        {\r\n            complete = () => {\r\n            },\r\n            error = () => {\r\n            }\r\n        }\r\n    ) {\r\n        this.onLocationComplete = complete;\r\n    }\r\n\r\n    onSuccessGps(data) {\r\n        this.gpsCoords = data;\r\n        if (!this.initIbeacon || this.currentLocation !== \"ibeacon\") {\r\n            this.onLocationComplete(this.gpsCoords);\r\n        }\r\n    }\r\n\r\n    onSuccessIbeacon(data) {\r\n        this.ibeaconCoords = data;\r\n        this.onLocationComplete(this.ibeaconCoords);\r\n    }\r\n}\r\n\r\nexport default new Loc();","/**\r\n * Created by j_bleach on 2018/10/16 0016.\r\n */\r\nimport loc from \"./loc\";\r\n\r\nexport default loc;"],"sourceRoot":""}